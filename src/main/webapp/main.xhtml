<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    
<!--meta http-equiv="refresh" content="{pageContext.session.maxInactiveInterval};url=login.xhtml" /--> 

<f:event type="preRenderView" listener="#{userBean.checkNotLoggedin}" />
<f:view>
    <h:head>
        <title>ABACUS - Powered by CEDIANT</title>
        <h:outputStylesheet library="css" name="main.css" />
        <h:outputStylesheet library="jqPlot" name="jquery.jqplot.css" />
    </h:head>
    <h:body onload="buildgraphs('#{dashboardBean.strOne}', '#{dashboardBean.strTwo}', #{dashBoardBean.interval}); #{dashboardBean.setPollEnabled(true)}; #{userBean.setActiveTab('Dashboard')}; #{userBean.changeSub('Main')};" 
            onunload="#{dashboardBean.setPollEnabled(true)}; #{userBean.setActiveTab('Dashboard')}; #{userBean.changeSub('Main')};">                                      
        <h:outputScript library="jqPlot" name="jquery.min.js"/>
        <h:outputScript library="jqPlot" name="jquery.jqplot.min.js"/>
        <h:outputScript library="jqPlot" name="plugins/jqplot.pieRenderer.min.js"/>
        <h:outputScript library="jqPlot" name="plugins/jqplot.donutRenderer.min.js"/>
        <h:outputScript library="jqPlot" name="plugins/jqplot.highlighter.min.js"/>
        <h:outputScript library="jqPlot" name="plugins/jqplot.cursor.min.js"/>
        <h:outputScript library="jqPlot" name="plugins/jqplot.cursor.min.js"/>
        <h:outputScript library="jqPlot" name="plugins/jqplot.dateAxisRenderer.min.js"/>
        <h:outputScript library="jqPlot" name="plugins/jqplot.enhancedLegendRenderer.min.js"/>
        <!--h:outputScript library="jqPlot" name="plugins/jqplot.pieLegendRenderer.min.js"/-->
        
        <h:outputScript library="jqPlot" name="plugins/jqplot.barRenderer.min.js"/>
        <h:outputScript library="jqPlot" name="plugins/jqplot.categoryAxisRenderer.min.js"/>
        <h:outputScript library="jqPlot" name="plugins/jqplot.pointLabels.min.js"/>
        
        <h:outputScript library="js" name="abacus.js"/>    
        
        <div id="wrapDiv">            
        <rich:panel id="headerPanel">  
            <h:panelGrid columns="2">
                <h:panelGrid>
                    <h:graphicImage library="img" 
                                    name="#{userBean.logoImg}" 
                                    height="32px" />
                </h:panelGrid>
                <h:panelGrid id="headerGrid" columns="7">    
                    <h:outputLink styleClass="headerLinks">Language</h:outputLink>
                    <h:outputLink styleClass="headerLinks">Help</h:outputLink>
                    <h:outputLink styleClass="headerLinks">About</h:outputLink>
                    <h:graphicImage id="separatorHeader" 
                                    library="img" 
                                    name="lineSeparator.png" 
                                    height="32px" />
                    <h:outputText id ="welcomeText" value="Welcome" />
                    <h:outputText id="welcomeName"                              
                                  value="#{userBean.username}"/>
                    <h:outputLink value="logout.xhtml">
                        <h:graphicImage library="img" name="logout.png" height="32px" />
                    </h:outputLink>                 
                </h:panelGrid>
            </h:panelGrid>                        
        </rich:panel>
                
        <h:form>
        <rich:collapsiblePanel id="statusPanel" 
                               header="Status" 
                               switchType="client"
                               bodyClass="statusStyle"
                               headerClass="headerStatus">
            <h:panelGrid columns="5"                            
                         width="100%"
                         styleClass="outerPanel"
                         cellspacing="0">
                <h:panelGrid id="status_1_panel" 
                             styleClass="innerPanel">
                    <h:outputText value="INFO" styleClass="subStatusTitle" />
                    <h:panelGrid columns="2" >                        
                        <h:graphicImage library="img" name="serverIcon.png" height="48px;" 
                                        styleClass="statusGraphic" />
                            <h:panelGrid columns="2" columnClasses="subStatusCol">
                            <h:outputText value="Name: " />
                            <h:outputText value="miguel-Ubuntu" styleClass="subStatusTitle" />
                            <h:outputText value="IP: " />
                            <h:outputText value="192.10.0.100" styleClass="subStatusTitle" />
                            <h:outputText value="Status: " />
                            <h:graphicImage library="img" name="greenOkIcon.png" height="16px" styleClass="subStatusTitle" />
                            <h:outputText value="GPU: " />
                            <h:outputText value="Nvidia" styleClass="subStatusTitle" />
                        </h:panelGrid>
                    </h:panelGrid>                    
                </h:panelGrid>
                <h:panelGrid id="status_2_panel" styleClass="innerPanel">
                    <h:outputText value="COMPUTER" styleClass="subStatusTitle" />                    
                    <div id="computerBarDiv" style="height: 65px; width: 176px;" />
                    <h:outputScript library="jqPlot" name="createComputerGraph.js"/>
                </h:panelGrid>
                <h:panelGrid id="status_3_panel" styleClass="innerPanel">
                    <h:outputText value="GPU" styleClass="subStatusTitle" />
                    <div id="gpuBarDiv" style="height: 65px; width: 118px;" />
                    <h:outputScript library="jqPlot" name="createGpuGraph.js"/>                                       
                </h:panelGrid>
                <h:panelGrid id="status_4_panel" styleClass="innerPanel">
                    <h:outputText value="SYSTEM HEALTH" styleClass="subStatusTitle" />                    
                    <h:panelGrid columns="8" columnClasses="subStatusCol2,subStatusCol2,subStatusCol2,subStatusCol2">
                        <div id="queuedBarDiv" style="height: 65px; width: 118px;" />   
                        <h:outputScript library="jqPlot" name="createQueuedGraph.js"/>
                        <div id="runningBarDiv" style="height: 65px; width: 118px;" /> 
                        <h:outputScript library="jqPlot" name="createRunningGraph.js"/>
                        <div id="loadBarDiv" style="height: 65px; width: 118px;" />                                                
                        <h:outputScript library="jqPlot" name="createLoadGraph.js"/>                        
                        <div id="diskBarDiv" style="height: 65px; width: 118px;"/>  
                        <h:outputScript library="jqPlot" name="createDiskGraph.js"/>
                    </h:panelGrid>                    
                </h:panelGrid>                
                <h:panelGrid id="status_5_panel" styleClass="innerPanel">
                    <a4j:commandButton value="Refresh" 
                                       render="outerStatusPanel"/>
                </h:panelGrid>                                
            </h:panelGrid>
        </rich:collapsiblePanel>
        </h:form>
        
        <!--h:graphicImage library="img" name="header-blue-plain.jpg" 
                        style="width: 100%; opacity: 0.4;" /-->            
        
        <h:form>
        <rich:popupPanel id="resultPopup" modal="false" autosized="true" resizeable="false"> 
            <f:facet name="header">
                <h:outputText value="Result" />
            </f:facet>
            <f:facet name="controls">
                <h:outputLink value="#" onclick="#{rich:component('resultPopup')}.hide(); return false;">
                    X                    
                </h:outputLink>
            </f:facet>
            <h:graphicImage library="img" name="redSphere.png" />
        </rich:popupPanel>
        </h:form>
        
        <h:form>
        <rich:popupPanel id="JSPopup" 
                         modal="false"
                         autosized="true" 
                         moveable="true"
                         onshow="init('#{nBodysBean.numParticles}', '#{nBodysBean.numSteps}', '#{nBodysBean.coordinates}')"
                         left="0px"
                         top="0px"> 
            <f:facet name="header">
                <h:outputText value="Result" />
            </f:facet>
            <f:facet name="controls">
                <h:outputLink value="#" onclick="#{rich:component('JSPopup')}.hide(); return false;">
                    X                    
                </h:outputLink>
            </f:facet>       
            <!--h:graphicImage library="img" name="redSphere.png" /-->
            <!-- JavaScript -->
            <div id="nBodyDiv">
                <h:outputScript library="threeJS" name="three.min.js"/>
                <!--h:outputScript library="js" name="rotatingCube.js" /-->
                <h:outputScript library="threeJS" name="nbody.js" />
            </div>
            <!--div-->
                <!--ui:insert id="JSResult"-->                    
                    <!--ui:include src="welcome.xhtml" /-->                    
                <!--/ui:insert-->                
            <!--/div-->
        </rich:popupPanel>
        <!--a4j:status onstart="{rich:component('statPane')}.show()" 
                    onstop="{rich:component('statPane')}.hide()" /-->
        </h:form>
        
        <!--h:form>
            <a4j:push id="pushJms" address="pushTopicsContext">
                <a4j:ajax event="dataavailable" render="testsSimplyTable" />
            </a4j:push>
        </h:form-->
        
        <div id="mainDiv" >
        <!--h:form id="generalForm"-->
            <h:form>
                <a4j:jsFunction name="setActiveTab"    
                                render="poll,dashboardGrid,managementPanel,tasksPanel,myAccountPanel,myMonitorPanel">
                    <a4j:param name="activeTab" assignTo="#{userBean.activeTab}"/>
                </a4j:jsFunction>
            </h:form>
            <h:form>
                <a4j:jsFunction name="setActiveSub" 
                                render="subManagementPanel,subTasksPanel,subAccountPanel,subMonitorPanel">
                    <a4j:param name="activeSub" assignTo="#{userBean.activeSub}"/>
                </a4j:jsFunction> 
            </h:form>        
            <h:form>
            <rich:tabPanel id="generalTabPanel"
                           switchType="client" 
                           activeItem="#{userBean.activeTab==null?'Dashboard':userBean.activeTab}"
                           tabActiveHeaderClass="tabActive">

                <!--div id="externdiv" style="width: 48%;" /-->
                <!--div id="piechart" style="width: 48%;" /-->  
                <rich:tab header="Dashboard"
                          id="Dashboard"
                          onenter="setActiveTab('Dashboard'); buildgraphs('#{dashboardBean.strOne}', '#{dashboardBean.strTwo}', #{dashboardBean.interval});"                      
                          render="poll,dashboardGrid"
                          contentClass="contentTab">  
                    <f:facet name="header">
                        <h:panelGroup>
                            <h:panelGrid columns="2" columnClasses="middleCol,middleCol">
                                <h:graphicImage library="img" name="dashboard.png" height="18px;"/>
                                <h:outputLabel value="Dashboard"/>
                            </h:panelGrid>
                        </h:panelGroup>
                    </f:facet>

                    <!--f:ajax event="click"  
                            render="poll,dashboardGrid"/-->                 

                    <!--f:ajax event="click" 
                            execute="@form" 
                            render="dashboardGrid" 
                            listener="{dashboardBean.updateData(5)}"
                            onevent="buildplots('{dashboardBean.strOne}','{dashboardBean.strTwo}')" /--> 
                    <!--
                    onbegin="buildplots('{dashboardBean.strOne}','{dashboardBean.strTwo}')"
                    render="poll"
                    execute="@form"
                    --> 
                    <!--h:form>
                        <a4j:jsFunction name="buildplots" render="Dashboard">
                            <a4j:param name="strOne" assignTo="{dashboardBean.strOne}" />
                            <a4j:param name="strTwo" assignTo="{dashboardBean.strTwo}" />
                        </a4j:jsFunction>
                    </h:form-->

                    <c:if test="false">
                        <h:outputScript library="jqPlot" name="createplots.js"/> 
                        <h:panelGrid columns="2" style="width: 100%" id="dashboardGrid">                                        
                            <h:panelGrid style="width: 100%;">
                                <div id="chartdiv" style="width: 100%;" />
                            </h:panelGrid>
                            <h:panelGrid style="width: 100%;">
                                <div id="piediv" style="width: 100%;" />
                            </h:panelGrid>                    
                        </h:panelGrid>
                        <h:form id="pollForm">
                            <a4j:poll id="poll"                              
                                      interval="5000" 
                                      enabled="#{dashboardBean.pollEnabled}" 
                                      render="poll,dashboardGrid"
                                      action="#{dashboardBean.updateData(5)}" 
                                      execute="@form"
                                      oncomplete="buildgraphs('#{dashboardBean.strOne}', '#{dashboardBean.strTwo}', #{dashboardBean.interval})"/>      
                                <div id="hiddenId">
                                    <h:inputHidden id="hiddenOne" value="#{dashboardBean.strOne}" />
                                    <h:inputHidden id="hiddenTwo" value="#{dashboardBean.strTwo}" />
                                </div>
                        </h:form>
                    </c:if>
                    
                    <h:outputText value="TASKS" styleClass="dashboardSubtitle" />
                    <h:panelGrid id="tasksDashboard" columns="2" styleClass="dashboardPanelAndSpace">                                                                    
                        <h:panelGrid>                            
                            <div id="dashboardFirstDiv" style="height: 200px; width: 500px;" />
                            <h:outputScript library="jqPlot" name="createTasksGraph.js"/>     
                            <!--h:graphicImage library="img" name="Screenshot1.png" width="100%" /-->
                        </h:panelGrid> 
                        <h:form>
                        <rich:dataTable id="procSummaryTable" 
                                        value="#{processesBean.getLastProcesses(5)}" 
                                        var="process" 
                                        iterationStatusVar="it"                                     
                                        rows="5">
                            <rich:column>
                                <f:facet name="header">ID</f:facet>
                                <h:outputText value="#{process.idProcess}" />
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">User</f:facet>
                                <h:outputText value="#{process.user.userName}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Name</f:facet>
                                <h:outputText value="#{process.name}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Type</f:facet>
                                <h:outputText value="#{process.type}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Priority</f:facet>
                                <h:outputText value="#{process.priority}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Status</f:facet>                                                        
                                <h:outputText value="#{process.status}" 
                                              style="color: green;" 
                                              rendered="#{process.status.equalsIgnoreCase('finished')}"/>
                                <h:outputText value="#{process.status}" 
                                              style="color: red;" 
                                              rendered="#{process.status.equalsIgnoreCase('running')}"/>
                                <h:outputText value="#{process.status}" 
                                              style="color: blue;" 
                                              rendered="#{process.status.equalsIgnoreCase('waiting')}"/>                                                      
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Start time</f:facet>
                                <h:outputText value="#{process.startTime}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">End time</f:facet>
                                <h:outputText value="#{process.endTime}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Actions</f:facet>
                                <h:selectOneMenu value="#{processesBean.action}">
                                    <f:selectItem noSelectionOption="true"
                                                  id="noOption"/>
                                    <f:selectItem itemLabel="Cancel" 
                                                  itemValue="cancel"
                                                  itemDisabled="#{processesBean.isFinished(process.idProcess)}"/>
                                    <f:selectItem itemLabel="Force Start" 
                                                  itemValue="force"
                                                  itemDisabled="#{not processesBean.isWaiting(process.idProcess)}"/>
                                </h:selectOneMenu>
                            </rich:column>
                            <f:facet name="footer">
                                <rich:column colspan="8">
                                    <a4j:commandButton id="procButton"
                                                       value="Submit" 
                                                       action="#{processesBean.executeActions}"                                                       
                                                       render="procSummaryTable" />
                                </rich:column>
                            </f:facet>                        
                        </rich:dataTable> 
                        </h:form>
                        <!--h:graphicImage library="img" name="Screenshot3.png" width="100%" /-->
                    </h:panelGrid> 
                    <h:outputText value="SYSTEM" styleClass="dashboardSubtitle" />
                    <h:panelGrid id="systemDashboard" columns="2" 
                                 styleClass="dashboardPanel" width="100%"
                                 columnClasses="dashboardCols,dashboardCols">
                        <h:panelGrid>
                            <div id="dashboardSecondDiv" style="height: 200px; width: 500px;" />
                            <h:outputScript library="jqPlot" name="createSystemGraph.js"/>
                            <!--h:graphicImage library="img" name="Screenshot2.png" width="100%" /-->
                        </h:panelGrid>
                        <h:form>
                        <rich:dataTable id="nodesSummaryTable" 
                                        value="#{nodesBean.getLastNodes(5)}" 
                                        var="node" 
                                        iterationStatusVar="it"                                     
                                        rows="5">
                            <rich:column>
                                <f:facet name="header">ID</f:facet>
                                <h:outputText value="#{node.idNode}" />                                
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Hostname</f:facet>
                                <h:outputText value="#{node.hostname}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">IP</f:facet>
                                <h:outputText value="#{node.ip}" />
                            </rich:column>
                            <rich:column styleClass="subStatusCol2">
                                <f:facet name="header">Status</f:facet>
                                <!--h:outputText value="{node.status}" /-->
                                <h:graphicImage library="img" 
                                                name="greenOkIcon.png" 
                                                rendered="#{node.status.equalsIgnoreCase('ok')}"
                                                height="24px"/>
                                <h:graphicImage library="img" 
                                                name="warningIcon.png" 
                                                rendered="#{node.status.equalsIgnoreCase('warning')}" 
                                                height="24px"/>
                                <h:graphicImage library="img" 
                                                name="errorIcon.png" 
                                                rendered="#{node.status.equalsIgnoreCase('error')}" 
                                                height="24px"/>
                            </rich:column>
                            <rich:column styleClass="subStatusCol2">
                                <f:facet name="header">CPU</f:facet>
                                <!--h:outputText value="{node.cpu}" /-->
                                <h:graphicImage library="img" 
                                                name="greenOkIcon.png" 
                                                rendered="#{node.cpu.equalsIgnoreCase('ok')}"
                                                height="24px"/>
                                <h:graphicImage library="img" 
                                                name="warningIcon.png" 
                                                rendered="#{node.cpu.equalsIgnoreCase('warning')}" 
                                                height="24px"/>
                                <h:graphicImage library="img" 
                                                name="errorIcon.png" 
                                                rendered="#{node.cpu.equalsIgnoreCase('error')}" 
                                                height="24px"/>
                            </rich:column>
                            <rich:column styleClass="subStatusCol2">
                                <f:facet name="header">Mem</f:facet>
                                <!--h:outputText value="{node.mem}" /-->
                                <h:graphicImage library="img" 
                                                name="greenOkIcon.png" 
                                                rendered="#{node.mem.equalsIgnoreCase('ok')}"
                                                height="24px"/>
                                <h:graphicImage library="img" 
                                                name="warningIcon.png" 
                                                rendered="#{node.mem.equalsIgnoreCase('warning')}" 
                                                height="24px"/>
                                <h:graphicImage library="img" 
                                                name="errorIcon.png" 
                                                rendered="#{node.mem.equalsIgnoreCase('error')}" 
                                                height="24px"/>
                            </rich:column>
                            <rich:column styleClass="subStatusCol2">
                                <f:facet name="header">Disk</f:facet>
                                <!--h:outputText value="{node.disk}" /-->
                                <h:graphicImage library="img" 
                                                name="greenOkIcon.png" 
                                                rendered="#{node.disk.equalsIgnoreCase('ok')}"
                                                height="24px"/>
                                <h:graphicImage library="img" 
                                                name="warningIcon.png" 
                                                rendered="#{node.disk.equalsIgnoreCase('warning')}" 
                                                height="24px"/>
                                <h:graphicImage library="img" 
                                                name="errorIcon.png" 
                                                rendered="#{node.disk.equalsIgnoreCase('error')}" 
                                                height="24px"/>
                            </rich:column>                            
                            <rich:column>
                                <f:facet name="header">Actions</f:facet>
                                <h:selectOneMenu value="">
                                    <f:selectItem noSelectionOption="true"
                                                  id="noOption"/>   
                                    <f:selectItem id="action1" itemLabel="action1"/>
                                    <f:selectItem id="action2" itemLabel="action2"/>
                                </h:selectOneMenu>
                            </rich:column>
                            <f:facet name="footer">
                                <rich:column colspan="8">
                                    <a4j:commandButton id="nodeButton"
                                                       value="Submit"                                                        
                                                       render="nodeSummaryTable" />
                                </rich:column>
                            </f:facet>                        
                        </rich:dataTable>   
                        </h:form>
                    </h:panelGrid>                    
                    <h:panelGrid id="alertsUpdateDashboard" 
                                 columns="2" 
                                 cellspacing="0" 
                                 cellpadding="0"
                                 width="100%">                    
                        <h:panelGrid id="alertsDashboard" 
                                     cellspacing="0" 
                                     cellpadding="0"
                                     width="100%">
                            <h:outputText value="ALERTS" styleClass="dashboardSubtitle" />   
                            <h:panelGrid id="alertsInnerPanel"
                                         columns="5"                                          
                                         width="100%">
                                <h:panelGrid styleClass="alertPanel" 
                                             columnClasses="alertColPanel">
                                    <h:panelGrid columns="2" 
                                                 columnClasses="subStatusCol2,subStatusCol2">                                        
                                        <h:graphicImage library="img" 
                                                        name="diskIcon.png" 
                                                        height="32px;" />
                                        <h:outputText value="Disk" 
                                                      styleClass="alertTitle"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="3" 
                                                 styleClass="alertInnerPanel" 
                                                 columnClasses="subStatusCol2,subStatusCol3,subStatusCol2" > 
                                        <h:outputText value="CRITICAL" styleClass="alertInnerTitle"/>
                                        <h:outputText value="" />
                                        <h:outputText value="WARNING" styleClass="alertInnerTitle"/>
                                        <h:outputText value="2" styleClass="alertCritPositNumber"/>
                                        <h:outputText value="|" styleClass="separator" />
                                        <h:outputText value="2" styleClass="alertWarnPositNumber"/>                                        
                                    </h:panelGrid>
                                </h:panelGrid>
                                <h:panelGrid styleClass="alertPanel" 
                                             columnClasses="alertColPanel">
                                    <h:panelGrid columns="2" 
                                                 columnClasses="subStatusCol2,subStatusCol2">                                        
                                        <h:graphicImage library="img" 
                                                        name="cpuIcon.png" 
                                                        height="32px;" />
                                        <h:outputText value="CPU" 
                                                      styleClass="alertTitle"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="3" 
                                                 styleClass="alertInnerPanel" 
                                                 columnClasses="subStatusCol2,subStatusCol3,subStatusCol2" > 
                                        <h:outputText value="CRITICAL" styleClass="alertInnerTitle"/>
                                        <h:outputText value="" />
                                        <h:outputText value="WARNING" styleClass="alertInnerTitle"/>
                                        <h:outputText value="0" styleClass="alertZeroNumber"/>
                                        <h:outputText value="|" styleClass="separator" />
                                        <h:outputText value="2" styleClass="alertWarnPositNumber"/>                                        
                                    </h:panelGrid>
                                </h:panelGrid>
                                <h:panelGrid styleClass="alertPanel" 
                                             columnClasses="alertColPanel">
                                    <h:panelGrid columns="2" 
                                                 columnClasses="subStatusCol2,subStatusCol2">                                        
                                        <h:graphicImage library="img" 
                                                        name="gpuIcon.png" 
                                                        height="32px;" />
                                        <h:outputText value="GPU" 
                                                      styleClass="alertTitle"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="3" 
                                                 styleClass="alertInnerPanel" 
                                                 columnClasses="subStatusCol2,subStatusCol3,subStatusCol2" > 
                                        <h:outputText value="CRITICAL" styleClass="alertInnerTitle"/>
                                        <h:outputText value="" />
                                        <h:outputText value="WARNING" styleClass="alertInnerTitle"/>
                                        <h:outputText value="2" styleClass="alertCritPositNumber"/>
                                        <h:outputText value="|" styleClass="separator" />
                                        <h:outputText value="0" styleClass="alertZeroNumber"/>                                        
                                    </h:panelGrid>
                                </h:panelGrid>
                                <h:panelGrid styleClass="alertPanel" 
                                             columnClasses="alertColPanel">
                                    <h:panelGrid columns="2" 
                                                 columnClasses="subStatusCol2,subStatusCol2">                                        
                                        <h:graphicImage library="img" 
                                                        name="tempIcon.png" 
                                                        height="32px;" />
                                        <h:outputText value="TEMP" 
                                                      styleClass="alertTitle"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="3" 
                                                 styleClass="alertInnerPanel" 
                                                 columnClasses="subStatusCol2,subStatusCol3,subStatusCol2" > 
                                        <h:outputText value="CRITICAL" styleClass="alertInnerTitle"/>
                                        <h:outputText value="" />
                                        <h:outputText value="WARNING" styleClass="alertInnerTitle"/>
                                        <h:outputText value="0" styleClass="alertZeroNumber"/>
                                        <h:outputText value="|" styleClass="separator" />
                                        <h:outputText value="1" styleClass="alertWarnPositNumber"/>                                        
                                    </h:panelGrid>
                                </h:panelGrid>
                                <h:panelGrid styleClass="alertPanel" 
                                             columnClasses="alertColPanel">
                                    <h:panelGrid columns="2" 
                                                 columnClasses="subStatusCol2,subStatusCol2">                                        
                                        <h:graphicImage library="img" 
                                                        name="errorIcon.png" 
                                                        height="32px;" />
                                        <h:outputText value="Errors" 
                                                      styleClass="alertTitle"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="3" 
                                                 styleClass="alertInnerPanel" 
                                                 columnClasses="subStatusCol2,subStatusCol3,subStatusCol2" > 
                                        <h:outputText value="CRITICAL" styleClass="alertInnerTitle"/>
                                        <h:outputText value="" />
                                        <h:outputText value="WARNING" styleClass="alertInnerTitle"/>
                                        <h:outputText value="0" styleClass="alertZeroNumber"/>
                                        <h:outputText value="|" styleClass="separator" />
                                        <h:outputText value="0" styleClass="alertZeroNumber"/>                                        
                                    </h:panelGrid>
                                </h:panelGrid>
                            </h:panelGrid>
                        </h:panelGrid>                    
                        <h:panelGrid id="updateDashboard" styleClass="verticalSeparator">
                            <h:panelGrid>
                                <h:outputText value="OTHERS" styleClass="dashboardSubtitle" />
                                <h:panelGrid styleClass="othersPanel" 
                                             columnClasses="alertColPanel">
                                    <h:panelGrid columns="2" 
                                                 columnClasses="subStatusCol2,subStatusCol2">                                        
                                        <h:graphicImage library="img" 
                                                        name="diskIcon.png" 
                                                        height="32px;" />
                                        <h:outputText value="Disk" 
                                                      styleClass="alertTitle"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="3" 
                                                 styleClass="alertInnerPanel" 
                                                 columnClasses="subStatusCol2,subStatusCol3,subStatusCol2" > 
                                        <h:outputText value="CRITICAL" styleClass="alertInnerTitle"/>
                                        <h:outputText value="" />
                                        <h:outputText value="WARNING" styleClass="alertInnerTitle"/>
                                        <h:outputText value="2" styleClass="alertCritPositNumber"/>
                                        <h:outputText value="|" styleClass="separator" />
                                        <h:outputText value="2" styleClass="alertWarnPositNumber"/>                                        
                                    </h:panelGrid>
                                </h:panelGrid>
                            </h:panelGrid>
                        </h:panelGrid>
                    </h:panelGrid>
                </rich:tab>                                                                

                <rich:tab header="Tasks"
                          id="Tasks"
                          onenter="setActiveTab('Tasks')"
                          onleave="setActiveSub('Main')"
                          contentClass="richTabContent">  
                    <f:facet name="header">
                        <h:panelGroup>
                            <h:panelGrid columns="2" columnClasses="middleCol,middleCol">
                                <h:graphicImage library="img" name="tasks.png" height="18px;"/>
                                <h:outputLabel value="Tasks"/>
                            </h:panelGrid>
                        </h:panelGroup>
                    </f:facet>         
                    <h:form id="subTasks">
                        <h:panelGrid id ="subTasksPanel" columns="4" styleClass="panelLinks" width="100%"                             
                                 columnClasses="subStatusCol2,subStatusCol2,subStatusCol2,subStatusCol2">                    
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Main')}" 
                                             value="Main" 
                                             render="subTasksPanel,tasksPanel"
                                             execute=":subTasks"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Main')}"/>
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Launch')}" 
                                             value="Launch" 
                                             render="subTasksPanel,tasksPanel"
                                             execute=":subTasks"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Launch')}"/>
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Monitor')}" 
                                             value="Monitor" 
                                             render="subTasksPanel,tasksPanel"
                                             execute=":subTasks"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Monitor')}"/>
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Tests')}" 
                                             value="Tests" 
                                             render="subTasksPanel,tasksPanel"
                                             execute=":subTasks"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Tests')}"/>                    
                        </h:panelGrid>
                    </h:form>
                    <br />                      
                    <h:panelGrid id="tasksPanel" width="100%">                              
                        <!--h:form id="scriptForm">
                            <rich:panel id="scriptPanel" rendered="{userBean.getActiveSub().equalsIgnoreCase('Main')}">
                                <f:facet name="header" >
                                    <h:outputText value="Execute scripts"/>
                                </f:facet>
                                <h:panelGrid> 
                                    <rich:fileUpload fileUploadListener="{fileUploadBean.listener}" 
                                                     id="upload"
                                                     maxFilesQuantity="10"
                                                     onclear="onclear(event)">
                                        <a4j:ajax event="uploadcomplete" 
                                                  execute="@none"
                                                  render="scriptButton"/>  
                                        <a4j:ajax event="clear" 
                                                  execute="@none"
                                                  render="scriptButton"/> 

                                        <a4j:jsFunction name="removeFile" 
                                                           render="info" 
                                                           action="{fileUploadBean.clearFile}">  
                                            <a4j:param name="clearedFile" 
                                                       assignTo="{fileUploadBean.clearedFile}" />  
                                        </a4j:jsFunction>                                

                                    </rich:fileUpload>
                                    <h:panelGrid columns="6">
                                        <h:outputText value="Type: " />
                                        <h:selectOneMenu value="{fileUploadBean.selectedType}"
                                                         valueChangeListener="{fileUploadBean.valueChanged}">
                                            <f:selectItem itemLabel="Select..." noSelectionOption="" />
                                            <f:selectItems value="{fileUploadBean.instTypes}" 
                                                           var="type"
                                                           itemValue="{type.idApp}"
                                                           itemLabel="{type.name}" /> 
                                            <a4j:ajax event="valueChange" 
                                                      render="scriptButton" 
                                                      execute=":scriptForm" />
                                        </h:selectOneMenu>  

                                        <h:outputText value="Priority: " />
                                        <h:selectOneMenu value="{fileUploadBean.selectedPrior}">
                                            <f:selectItem itemLabel="Select..." noSelectionOption="" />
                                            <f:selectItem itemLabel="1" itemValue="1" />
                                            <f:selectItem itemLabel="2" itemValue="2" />
                                            <f:selectItem itemLabel="3" itemValue="3" />
                                            <f:selectItem itemLabel="4" itemValue="4" />
                                            <f:selectItem itemLabel="5" itemValue="5" />
                                            <f:selectItem itemLabel="6" itemValue="6" />
                                            <f:selectItem itemLabel="7" itemValue="7" />
                                            <f:selectItem itemLabel="8" itemValue="8" />
                                            <f:selectItem itemLabel="9" itemValue="9" />
                                            <f:selectItem itemLabel="10" itemValue="10" />
                                        </h:selectOneMenu>

                                        <h:outputText value="Start now? " />
                                        <h:selectOneMenu value="{fileUploadBean.selectedStart}">
                                            <f:selectItem itemLabel="Select..." noSelectionOption="" />
                                            <f:selectItem itemLabel="true" itemValue="true" />
                                            <f:selectItem itemLabel="false" itemValue="false" />
                                        </h:selectOneMenu>

                                    </h:panelGrid>
                                    <f:facet name="footer">
                                        <a4j:commandButton id="scriptButton"
                                                           value="Submit" 
                                                           disabled="{fileUploadBean.disableButton()}"
                                                           action="{fileUploadBean.executeScript}"
                                                           execute=":scriptForm"
                                                           render="scriptPanel,processesTable"/>
                                    </f:facet>
                                </h:panelGrid>                        
                            </rich:panel>
                        </h:form-->
                        <!--h:form id="processesForm">
                            <rich:dataTable id="processesTable" 
                                            value="{processesBean.allProcesses}" 
                                            var="process" 
                                            iterationStatusVar="it"                                     
                                            rows="20"
                                            rendered="{userBean.getActiveSub().equalsIgnoreCase('Main')}">
                                <rich:column>
                                    <f:facet name="header">#</f:facet>
                                    {it.index}
                                </rich:column>
                                <rich:column>
                                    <f:facet name="header">ID</f:facet>
                                    <h:outputText value="{process.idProcess}" />
                                </rich:column>

                                <rich:column>
                                    <f:facet name="header">User</f:facet>
                                    <h:outputText value="{process.user.userName}" />
                                </rich:column>
                                <rich:column>
                                    <f:facet name="header">Name</f:facet>
                                    <h:outputText value="{process.name}" />
                                </rich:column>
                                <rich:column>
                                    <f:facet name="header">Type</f:facet>
                                    <h:outputText value="{process.type}" />
                                </rich:column>
                                <rich:column>
                                    <f:facet name="header">Priority</f:facet>
                                    <h:outputText value="{process.priority}" />
                                </rich:column>
                                <rich:column>
                                    <f:facet name="header">Status</f:facet>                                                        
                                    <h:outputText value="{process.status}" 
                                                  style="color: green;" 
                                                  rendered="{process.status.equalsIgnoreCase('finished')}"/>
                                    <h:outputText value="{process.status}" 
                                                  style="color: red;" 
                                                  rendered="{process.status.equalsIgnoreCase('running')}"/>
                                    <h:outputText value="{process.status}" 
                                                  style="color: blue;" 
                                                  rendered="{process.status.equalsIgnoreCase('waiting')}"/>                                                      
                                </rich:column>
                                <rich:column>
                                    <f:facet name="header">Start time</f:facet>
                                    <h:outputText value="{process.startTime}" />
                                </rich:column>
                                <rich:column>
                                    <f:facet name="header">End time</f:facet>
                                    <h:outputText value="{process.endTime}" />
                                </rich:column>
                                <rich:column>
                                    <f:facet name="header">Actions</f:facet>
                                    <h:selectOneMenu value="{processesBean.action}" 
                                                     valueChangeListener="{processesBean.valueChanged}" >
                                        <f:selectItem noSelectionOption="true"
                                                      id="noOption"/>
                                        <f:selectItem itemLabel="Cancel" 
                                                      itemValue="cancel"
                                                      itemDisabled="{processesBean.isFinished(process.idProcess)}"/>
                                        <f:selectItem itemLabel="Force Start" 
                                                      itemValue="force"
                                                      itemDisabled="{!processesBean.isWaiting(process.idProcess)}"/>
                                          <a4j:ajax event="valueChange"
                                                    execute=":processesForm" />
                                          <a4j:ajax event="click" 
                                                    listener="{processesBean.select(it.index)}" 
                                                    execute=":processesForm"/>
                                    </h:selectOneMenu>
                                </rich:column>
                                <f:facet name="footer">
                                    <rich:column colspan="8">
                                        <a4j:commandButton id="procButton"
                                                           value="Submit" 
                                                           action="{processesBean.executeActions}"
                                                           execute=":processesFrom"
                                                           render="processesTable" />
                                    </rich:column>
                                </f:facet>                        
                            </rich:dataTable>                    
                        </h:form-->    
      
                        <h:outputText value="TASKS" styleClass="title1"/>
                        
                        <h:panelGrid width="100%" 
                                     rendered="#{userBean.getActiveSub().equalsIgnoreCase('Main')}">
                            <h:panelGrid id="tasksMainTable"
                                         columns="2" 
                                         columnClasses="fixedWidth,topCol" 
                                         width="100%">
                                <h:form>
                                <rich:dataTable id="tasksTable" 
                                                value="#{processesBean.allProcesses}" 
                                                var="process" 
                                                iterationStatusVar="it"                                     
                                                rows="10">
                                    <rich:column>
                                        <f:facet name="header">ID</f:facet>
                                        <h:outputText value="#{process.idProcess}" />
                                    </rich:column>

                                    <rich:column>
                                        <f:facet name="header">User</f:facet>
                                        <h:outputText value="#{process.user.userName}" />
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">Name</f:facet>
                                        <h:outputText value="#{process.name}" />
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">Type</f:facet>
                                        <h:outputText value="#{process.type}" />
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">Priority</f:facet>
                                        <h:outputText value="#{process.priority}" />
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">Status</f:facet>                                                        
                                        <h:outputText value="#{process.status}" 
                                                      style="color: green;" 
                                                      rendered="#{process.status.equalsIgnoreCase('finished')}"/>
                                        <h:outputText value="#{process.status}" 
                                                      style="color: red;" 
                                                      rendered="#{process.status.equalsIgnoreCase('running')}"/>
                                        <h:outputText value="#{process.status}" 
                                                      style="color: blue;" 
                                                      rendered="#{process.status.equalsIgnoreCase('waiting')}"/>                                                      
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">Start time</f:facet>
                                        <h:outputText value="#{process.startTime}" />
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">End time</f:facet>
                                        <h:outputText value="#{process.endTime}" />
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">Actions</f:facet>
                                        <h:selectOneMenu value="#{processesBean.action}">
                                            <f:selectItem noSelectionOption="true"
                                                          id="noOptionTasks"/>
                                            <f:selectItem itemLabel="Cancel" 
                                                          itemValue="cancel"
                                                          itemDisabled="#{processesBean.isFinished(process.idProcess)}"/>
                                            <f:selectItem itemLabel="Force Start" 
                                                          itemValue="force"
                                                          itemDisabled="#{not processesBean.isWaiting(process.idProcess)}"/>
                                        </h:selectOneMenu>
                                    </rich:column>
                                    <f:facet name="footer">
                                        <rich:dataScroller page="#{processesBean.page}" />
                                        <br />
                                        <rich:column colspan="8">
                                            <a4j:commandButton id="tasksButton"
                                                               value="Submit" 
                                                               action="#{processesBean.executeActions}"                                                       
                                                               render="tasksTable" />
                                        </rich:column>
                                    </f:facet>                        
                                </rich:dataTable>  
                                </h:form>
                                <h:panelGrid>                                                                                                 
                                    <div id="tasksDiv" style="height: 200px; width: 500px;" />
                                    <h:outputScript library="jqPlot" name="createTasksPlot.js"/>     
                                    <!--h:graphicImage library="img" name="Screenshot1.png" width="100%" /--> 
                                    <rich:panel>
                                        <f:facet name="header">
                                            <h:outputText value="Search" />
                                        </f:facet>
                                        <h:form>
                                        <h:panelGrid columns="2" columnClasses="alignRight">
                                            <h:outputText value="Name" />
                                            <h:inputText />                                            
                                            <h:outputText value="Type" />                                            
                                            <h:selectOneMenu value="#{processesBean.searchedType}">
                                                <f:selectItem noSelectionOption="true"/>
                                                <f:selectItems value="#{processesBean.allTypes}" />
                                            </h:selectOneMenu>
                                            <h:outputText value="Priority" />                                            
                                            <h:selectOneMenu value="">
                                                <f:selectItem noSelectionOption="true"/>
                                                <f:selectItem itemLabel="Low" 
                                                              itemValue="low"/>
                                                <f:selectItem itemLabel="Medium" 
                                                              itemValue="medium"/>
                                                <f:selectItem itemLabel="High" 
                                                              itemValue="high"/>
                                            </h:selectOneMenu>                                            
                                            <h:outputText value="Elapsed time" />                                                
                                            <h:panelGrid columns="4" styleClass="removeSpacing,removeSpacing,removeSpacing,removeSpacing">
                                                <h:inputText styleClass="inputTime" />
                                                <h:outputText value="-" styleClass="marginAntiSpacing" />
                                                <h:inputText styleClass="widthTime" />
                                                <h:selectOneMenu value="">
                                                    <f:selectItem noSelectionOption="true"/>
                                                    <f:selectItem itemLabel="Milliseconds" 
                                                                  itemValue="milliseconds"/>
                                                    <f:selectItem itemLabel="Seconds" 
                                                                  itemValue="seconds"/>
                                                    <f:selectItem itemLabel="Minutes" 
                                                                  itemValue="minutes"/>
                                                </h:selectOneMenu>                                                                                                 
                                            </h:panelGrid>                                                                                              
                                            <h:outputText value="Started" />                                            
                                            <h:panelGrid columns="3" styleClass="removeSpacing,removeSpacing,removeSpacing">
                                                <rich:calendar value="#{calendarBean.selectedStartDate}" 
                                                               id="startCalendar" 
                                                               locale="#{calendarBean.locale}"
                                                               popup="#{calendarBean.popup}" 
                                                               datePattern="#{calendarBean.pattern}"
                                                               showApplyButton="#{calendarBean.showApply}" 
                                                               styleClass="calendarLeft"
                                                               disabled="#{calendarBean.disabled}" />         
                                                <h:outputText value="Finished" styleClass="afterCalendarLeft" />
                                                <rich:calendar value="#{calendarBean.selectedEndDate}" 
                                                               id="endCalendar" 
                                                               locale="#{calendarBean.locale}"
                                                               popup="#{calendarBean.popup}" 
                                                               datePattern="#{calendarBean.pattern}"
                                                               showApplyButton="#{calendarBean.showApply}" 
                                                               styleClass="calendar"
                                                               disabled="#{calendarBean.disabled}" />
                                            </h:panelGrid>
                                            <h:outputText value="User" />
                                            <h:selectOneMenu value="#{usersBean.searchedName}">
                                                <f:selectItem noSelectionOption="true" />
                                                <f:selectItems value="#{usersBean.allNames}" />
                                            </h:selectOneMenu>    
                                            <h:outputText />
                                            <h:outputText />
                                            <h:outputText />
                                            <h:commandButton value="Search">
                                                <rich:componentControl target="searchPopup" operation="show" />
                                            </h:commandButton>
                                        </h:panelGrid>
                                        </h:form>
                                    </rich:panel>
                                    <!--h:graphicImage library="img" name="search.png"/-->
                                </h:panelGrid>
                            </h:panelGrid>      
                        </h:panelGrid>                        

                        <h:panelGrid id="launchGrid"
                                     width="100%" 
                                     rendered="#{userBean.getActiveSub().equalsIgnoreCase('Launch')}">
                            <h:panelGrid id="launchCol" columns="4" columnClasses=",fixedWidth">
                                <!-- LAUNCH -->
                                <rich:panel>
                                    <f:facet name="header">
                                        <h:outputText value="DEPLOYED APPLICATIONS" />
                                    </f:facet>
                                    <h:panelGroup rendered="#{not userBean.launchLoading}">
                                    <rich:dataTable id="tasksSimplyTable" 
                                                    value="#{processesBean.allProcesses}" 
                                                    var="process" 
                                                    iterationStatusVar="it"                                     
                                                    rows="10"
                                                    styleClass="centered">
                                        <!--                                   
                                        selection="{processesTableBean.selection}"
                                        selectionMode="{processesTableBean.selectionMode}"
                                        -->
                                        <!--a4j:ajax execute="@none"
                                                  event="selectionchange" 
                                                  listener="{processesTableBean.selectionListener}"
                                                  render=":processSubmitPanel"/-->
                                        <rich:column>
                                            <f:facet name="header">ID</f:facet>
                                            <h:outputText value="#{process.idProcess}" />
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">User</f:facet>
                                            <h:outputText value="#{process.user.userName}" />
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">Name</f:facet>
                                            <h:outputText value="#{process.name}" />
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">Type</f:facet>
                                            <h:outputText value="#{process.type}" />
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">Priority</f:facet>
                                            <h:outputText value="#{process.priority}" />
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">Status</f:facet>                                                        
                                            <h:outputText value="#{process.status}" 
                                                          style="color: green;" 
                                                          rendered="#{process.status.equalsIgnoreCase('finished')}"/>
                                            <h:outputText value="#{process.status}" 
                                                          style="color: red;" 
                                                          rendered="#{process.status.equalsIgnoreCase('running')}"/>
                                            <h:outputText value="#{process.status}" 
                                                          style="color: blue;" 
                                                          rendered="#{process.status.equalsIgnoreCase('waiting')}"/>                                                      
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">Start time</f:facet>
                                            <h:outputText value="#{process.startTime}" />
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">End time</f:facet>
                                            <h:outputText value="#{process.endTime}" />
                                        </rich:column>                                        
                                        <f:facet name="footer">
                                            <rich:dataScroller page="#{processesBean.page}" />                                            
                                        </f:facet>                        
                                    </rich:dataTable> 
                                    <br />
                                    <rich:panel id="processSubmitPanel">
                                        <f:facet name="header">
                                            <h:outputText value="Parameters" />
                                        </f:facet>
                                        <!--h:form-->
                                        <h:panelGrid columns="3">
                                            <h:outputText value="TASK: " styleClass="title1" />
                                            <h:outputText value="#{processesTableBean.selectedProcess.name}"
                                                          styleClass="title1" />
                                            
                                            <h:outputText />
                                            <h:outputText value="Matrix A" />
                                            <h:inputText />
                                            <h:outputText />
                                            
                                            <h:outputText value="Matrix B" />
                                            <h:inputText />
                                            <h:outputText />                                                                                        
                                            
                                            <h:outputText value="Matrix File" />                                                                                                                           
                                            
                                            <h:inputText id="launchInputTextFile"
                                                         onclick="#{rich:component('uploadingPopup')}.show(); return false;" 
                                                         value="#{fileUploadBean.size}"/> 
                                            <h:outputText />
                                            
                                            <h:outputText value="Device" />                                            
                                            <h:selectOneMenu value="">    
                                                <f:selectItem noSelectionOption="true"/>
                                                <f:selectItem itemLabel="Processor" itemValue="processor" />
                                                <f:selectItem itemLabel="GPU" itemValue="gpu" />
                                            </h:selectOneMenu>                                                                                                                                                                                
                                            <h:outputText />
                                            
                                        </h:panelGrid>   
                                        <hr />
                                        <h:panelGrid styleClass="centered">
                                            <a4j:commandButton value="Submit" 
                                                               render="launchCol,launchPoll"
                                                               onbeforedomupdate="#{userBean.setLaunchLoading(true)}"/>
                                        </h:panelGrid>  
                                        <!--/h:form-->
                                    </rich:panel>
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{userBean.launchLoading}">
                                        <h:panelGrid styleClass="regularColAndBorderRight">
                                           <h:graphicImage library="img" name="processing.gif"/>                                
                                       </h:panelGrid>
                                    </h:panelGroup>
                                </rich:panel>                                
                                
                                <!-- DEPLOY -->
                                <h:panelGrid rendered="#{not userBean.deployLoading}" styleClass="regularCol">
                                    <rich:panel>
                                        <f:facet name="header">
                                            <h:outputText value="CREATE NEW TASK"/>
                                        </f:facet> 
                                        <h:form>
                                        <h:panelGrid columns="3">
                                            <h:outputText value="Application Name: "/>
                                            <h:inputText />
                                            <h:outputText />
                                            <h:outputText />
                                            <a4j:commandButton value="Add new parameter" 
                                                               onclick="#{rich:component('paramPopup')}.show(); return false;" />                                                
                                            <h:outputText />
                                            <h:outputText value="Executable File: "/>
                                            <h:inputText />
                                            <a4j:commandButton value="Upload" />
                                            <h:outputText value="Extra Files (.zip): "/>
                                            <h:inputText />
                                            <a4j:commandButton value="Upload" />
                                            <h:outputText />
                                            <a4j:commandButton value="Deploy" 
                                                               render="launchCol,deployPoll"
                                                               onbeforedomupdate="#{userBean.setDeployLoading(true)}"/>
                                            <h:outputText />
                                        </h:panelGrid>
                                        </h:form>
                                    </rich:panel>                                    
                                    <!--h:commandLink onclick="{rich:component('paramPopup')}.show(); return false;">
                                        <h:graphicImage library="img" name="Screenshot12.png"/>
                                    </h:commandLink-->                                                                        
                                </h:panelGrid>
                                <h:panelGrid rendered="#{userBean.deployLoading}" 
                                             styleClass="regularCol">
                                    <h:graphicImage library="img" name="processing.gif"/>                                
                                </h:panelGrid>
                            </h:panelGrid>
                        </h:panelGrid>
                        <h:form>
                        <h:panelGrid width="100%" 
                                     rendered="#{userBean.getActiveSub().equalsIgnoreCase('Tests')}">
                            <h:panelGrid id="testsPanel"
                                         columns="2" 
                                         columnClasses="topCol,topCol" 
                                         width="100%">
                                <h:panelGrid styleClass="regularColAndBorderRight" 
                                             rendered="#{not userBean.testLoading}">
                                    <rich:panel>
                                        <f:facet name="header">
                                            <h:outputText value="TEST APPLICATIONS" />
                                        </f:facet>                                                                                                                        
                                        <rich:dataTable id="testsSimplyTable" 
                                                        value="#{appsBean.allTests}" 
                                                        var="app">
                                            <rich:column>
                                                <f:facet name="header">ID</f:facet>
                                                <h:outputText value="#{app.idApp}" />
                                            </rich:column>
                                            <rich:column>
                                                <f:facet name="header">Name</f:facet>
                                                <h:outputText value="#{app.name}" />
                                            </rich:column>
                                            <rich:column>
                                                <f:facet name="header">Date</f:facet>
                                                <h:outputText value="#{app.instDate}" />
                                            </rich:column>                                            
                                            <rich:column>
                                                <f:facet name="header">User</f:facet>
                                                <h:outputText value="#{app.user.userName}" />
                                            </rich:column>                                                                                                                                                              
                                        </rich:dataTable>
                                        <br />
                                        
                                        <rich:panel>
                                            <f:facet name="header">
                                                <h:outputText value="Parameters" />
                                            </f:facet>
                                            <!--h:form-->
                                                <h:panelGrid columns="3">
                                                    
                                                    <h:outputText value="Name"/>
                                                    <h:inputText value="#{fileUploadBean.appName}"/>
                                                    <rich:message />
                                                    
                                                    <h:outputText value="Priority"/>
                                                    <h:selectOneMenu value="#{fileUploadBean.priority}">    
                                                        <f:selectItem noSelectionOption="true"/>
                                                        <f:selectItem itemLabel="High" itemValue="high" />
                                                        <f:selectItem itemLabel="Medium" itemValue="medium" />
                                                        <f:selectItem itemLabel="Low" itemValue="low" />
                                                    </h:selectOneMenu> 
                                                    <rich:message />
                                                    
                                                    <h:outputText value="Start now?"/>
                                                    <h:selectBooleanCheckbox value="#{fileUploadBean.startNow}" 
                                                                             onclick="#{fileUploadBean.changeStart()}" />
                                                    <rich:message />
                                                    
                                                    <h:outputText value="Script File"/>
                                                    <h:inputText id="inputTextFile"
                                                                 onclick="#{rich:component('uploadingPopup')}.show(); return false;" 
                                                                 value="#{fileUploadBean.size>0?fileUploadBean.file.name:null}"
                                                                 required="true"/>
                                                    <rich:message for="inputTextFile" ajaxRendered="true" />

                                                    <h:outputText value="Device" />                                            
                                                    <h:selectOneMenu value="#{fileUploadBean.device}">    
                                                        <f:selectItem noSelectionOption="true"/>
                                                        <f:selectItem itemLabel="Processor" itemValue="processor" />
                                                        <f:selectItem itemLabel="GPU" itemValue="gpu" />
                                                    </h:selectOneMenu> 
                                                    <rich:message />

                                                    <h:outputText />
                                                    <hr />
                                                    <h:outputText />

                                                    <h:outputText />
                                                    <a4j:commandButton value="Submit"
                                                                       render="testsPanel"
                                                                       onbeforedomupdate="#{fileUploadBean.launchTest('octave')}"/>
                                                    
                                                    <!--a4j:commandButton value="Submit"
                                                                       render="testsPanel,testPoll"
                                                                       action="{userBean.setTestLoading(true)}"/-->
                                                </h:panelGrid>
                                            <!--/h:form-->
                                        </rich:panel>                                        
                                        
                                    </rich:panel>
                                    <!--h:graphicImage library="img" name="testsForm.png"/-->                                    
                                </h:panelGrid>
                                <h:panelGrid styleClass="regularColAndBorderRight"
                                             rendered="#{userBean.testLoading}">
                                    <h:graphicImage library="img" name="processing.gif"/>
                                </h:panelGrid>                                
                                <h:panelGrid>
                                    <rich:dataTable id="testsHistoryTable" 
                                                 value="#{processesBean.allTests}" 
                                                 var="process" 
                                                 iterationStatusVar="it">
                                        <f:facet name="header">
                                            <h:outputText value="TEST TASKS" />
                                        </f:facet>                                                                                
                                        <rich:column>
                                            <f:facet name="header">ID</f:facet>
                                            <h:outputText value="#{process.idProcess}" />
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">User</f:facet>
                                            <h:outputText value="#{process.user.userName}" />
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">Name</f:facet>
                                            <h:outputText value="#{process.name}" />
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">Type</f:facet>
                                            <h:outputText value="#{process.type}" />
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">Priority</f:facet>
                                            <h:outputText value="#{process.priority}" />
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">Status</f:facet>                                                        
                                            <h:outputText value="#{process.status}" 
                                                          style="color: green;" 
                                                          rendered="#{process.status.equalsIgnoreCase('finished')}"/>
                                            <h:outputText value="#{process.status}" 
                                                          style="color: red;" 
                                                          rendered="#{process.status.equalsIgnoreCase('running')}"/>
                                            <h:outputText value="#{process.status}" 
                                                          style="color: blue;" 
                                                          rendered="#{process.status.equalsIgnoreCase('waiting')}"/>                                                      
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">Start time</f:facet>
                                            <h:outputText value="#{process.startTime}" />
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">End time</f:facet>
                                            <h:outputText value="#{process.endTime}" />
                                        </rich:column>                                        
                                        <f:facet name="footer">
                                            <rich:dataScroller page="#{processesBean.page}" />
                                            <br />
                                            <a4j:commandButton value="Refresh" 
                                                               render="testsHistoryTable" />
                                        </f:facet>                                                                                
                                    </rich:dataTable>
                                    <!--h:graphicImage  library="img" name="testsTable.png"/-->
                                </h:panelGrid>
                            </h:panelGrid>      
                        </h:panelGrid>
                        </h:form>
                    </h:panelGrid>
                    
                    <h:form>
                    <a4j:poll id="launchPoll" 
                              interval="2000" 
                              enabled="#{userBean.launchLoading}" 
                              render="launchPoll,launchCol,submittedPopup"
                              oncomplete="if(#{not userBean.launchLoading}) #{rich:component('submittedPopup')}.show(); return false;"/>                                                                                  
                    </h:form>
                              
                    <h:form>
                    <a4j:poll id="deployPoll" 
                              interval="2000" 
                              enabled="#{userBean.deployLoading}" 
                              render="deployPoll,launchCol,deployedPopup"
                              oncomplete="if(#{not userBean.deployLoading}) #{rich:component('deployedPopup')}.show(); return false;"/>
                    </h:form>
                    
                    <h:form>
                    <a4j:poll id="testPoll" 
                              interval="2000" 
                              enabled="#{userBean.testLoading}" 
                              render="testPoll,testsPanel,testPopup"
                              oncomplete="if(#{not userBean.testLoading}) #{rich:component('testPopup')}.show(); return false;"/>
                    </h:form>
                    
                    <h:form>
                    <a4j:jsFunction name="updateSub" render="launchCol">
                        <a4j:param name="activeSub" assignTo="#{userBean.activeSub}" />
                    </a4j:jsFunction>
                    </h:form>
                                 
                    <rich:popupPanel id="uploadingPopup" 
                                     modal="false" 
                                     autosized="true" 
                                     left="40%">
                        <f:facet name="header">
                            <h:outputText value="Uploading file..." />
                        </f:facet>
                        <f:facet name="controls">
                            <h:outputLink value="#" 
                                          onclick="#{rich:component('uploadingPopup')}.hide(); return false;">
                                <h:graphicImage library="img" name="closeIcon.png" width="16px" />
                            </h:outputLink>
                        </f:facet>
                        <!--h:form id="uploadingForm"
                                enctype="multipart/form-data"> 
                            <h:inputFile id="uploadedFile" 
                                         value="{processesTableBean.uploadedFile}"/>
                            <a4j:commandButton value="Upload" 
                                               action="{processesTableBean.upload}"/> 
                        </h:form-->
                        <!-- onblur="{rich:component('uploadingPopup')}.hide(); return false;" -->
                        <!--h:form enctype="multipart/form-data">
                            <h:inputFile value="{processesTableBean.uploadedFile}">
                                <f:ajax execute="@none" render="@form"/>
                            </h:inputFile>
                            <h:message for="file"/>
                            
                            <h:commandButton value="Upload" action="{processesTableBean.upload()}" />
                        </h:form-->      
                        <!--h:form id="uploadingForm"
                                enctype="multipart/form-data"> 
                            <h:inputFile id="uploadedFile" 
                                         value="{processesTableBean.uploadedFile}"/>
                            <h:commandButton value="Upload" 
                                             action="{processesTableBean.upload}"/>
                        </h:form-->
                        <h:form>
                            <rich:fileUpload fileUploadListener="#{fileUploadBean.listener}" 
                                             maxFilesQuantity="1"
                                             addLabel="Select File"
                                             listHeight="38px"
                                             noDuplicate="true"
                                             clearLabel="Clear">
                                <a4j:ajax event="uploadcomplete" 
                                          execute="@none"
                                          render=":inputTextFile"
                                          oncomplete="#{rich:component('uploadingPopup')}.hide(); return false;"/>
                            </rich:fileUpload>
                        </h:form>
                    </rich:popupPanel>
                    
                    <rich:popupPanel id="submittedPopup" 
                                     modal="false" 
                                     autosized="true" 
                                     resizeable="false"
                                     left="20%"
                                     onhide="updateSub('Launch');">
                        <f:facet name="header">
                            <h:outputText value="Task submitted" />
                        </f:facet>
                        <f:facet name="controls">
                            <h:outputLink value="#" 
                                          onclick="#{rich:component('submittedPopup')}.hide(); return false;">
                                <h:graphicImage library="img" name="closeIcon.png" width="16px" />
                            </h:outputLink>
                        </f:facet>
                        <h:panelGrid columns="2">
                            <h:graphicImage library="img" name="greenOkIcon.png" width="32" />
                            <p>Task submitted</p>
                        </h:panelGrid>                       
                    </rich:popupPanel>
                                        
                    <rich:popupPanel id="deployedPopup" 
                                     modal="false" 
                                     autosized="true" 
                                     resizeable="false"       
                                     onhide="updateSub('Launch');">
                        <f:facet name="header">
                            <h:outputText value="Task deployed" />
                        </f:facet>
                        <f:facet name="controls">
                            <h:outputLink value="#" 
                                          onclick="#{rich:component('deployedPopup')}.hide(); return false;">
                                <h:graphicImage library="img" name="closeIcon.png" width="16px" />
                            </h:outputLink>
                        </f:facet>
                        <h:panelGrid columns="2">
                            <h:graphicImage library="img" name="greenOkIcon.png" width="32" />
                            <p>Task deployed</p>
                        </h:panelGrid>                        
                    </rich:popupPanel>
                    
                    <rich:popupPanel id="testPopup" 
                                     modal="false" 
                                     autosized="true" 
                                     resizeable="false"       
                                     onhide="updateSub('Tests');">
                        <f:facet name="header">
                            <h:outputText value="Test done" />
                        </f:facet>
                        <f:facet name="controls">
                            <h:outputLink value="#" 
                                          onclick="#{rich:component('testPopup')}.hide(); return false;">
                                X
                            </h:outputLink>
                        </f:facet>
                        <h:panelGrid columns="2">
                            <h:graphicImage library="img" name="greenOkIcon.png" width="32" />
                            <p>Test done</p>
                        </h:panelGrid>                        
                    </rich:popupPanel>                   
                    
                    <rich:popupPanel id="paramPopup" 
                                     modal="false" 
                                     autosized="true" 
                                     onhide="updateSub('Launch');">
                        <f:facet name="header">
                            <h:outputText value="New Parameter" />
                        </f:facet>
                        <f:facet name="controls">
                            <h:outputLink value="#" 
                                          onclick="#{rich:component('paramPopup')}.hide(); return false;">
                                <h:graphicImage library="img" name="closeIcon.png" width="16px" />
                            </h:outputLink>
                        </f:facet>
                        <h:panelGrid columns="2">
                            <h:form>
                            <h:outputText value="Name: "/>
                            <h:inputText value="#{appsBean.newParam}"/>
                            <h:outputText value="Type: "/>
                            <h:selectOneRadio value="text">
                                <f:selectItem itemLabel="Text" itemValue="text" />
                                <f:selectItem itemLabel="Input File" itemValue="inputFile" />
                            </h:selectOneRadio>
                            <h:commandButton value="Accept" onclick="#{rich:component('paramPopup')}.hide(); return false;"/>
                            <h:commandButton value="Cancel" onclick="#{rich:component('paramPopup')}.hide(); return false;"/>
                            </h:form>
                        </h:panelGrid>
                        
                    </rich:popupPanel>
                    
                    <!--br /-->                
                    <!--h:form>                    
                        <rich:panel style="width: 50%">
                            <f:facet name="header">
                                <h:outputText value="Execute scripts" />
                            </f:facet>  
                            <a4j:commandButton value="Submit" 
                                               action="{fileUploadBean.executeScript()}"                                       
                                               render="scriptPanel,processesTable"/>
                            <h:panelGrid columns="2">    

                                <h:panelGrid>

                                    <h:form id="uploadScriptForm">
                                        <rich:fileUpload fileUploadListener="{fileUploadBean.listener}" 
                                                         id="upload"
                                                         maxFilesQuantity="10">
                                            <a4j:ajax event="uploadcomplete" 
                                                      execute="@none" />                                    
                                        </rich:fileUpload>  
                                    </h:form>
                                </h:panelGrid>
                                <h:panelGrid>

                                    <h:form id="scriptForm">
                                        <h:selectOneMenu value="{fileUploadBean.selectedType}">
                                            <f:selectItems value="{fileUploadBean.instTypes}" 
                                                           var="type"
                                                           itemValue="{type.idApp}"
                                                           itemLabel="{type.name}" />
                                            <f:selectItem itemLabel="Type 0" itemValue="0" />
                                            <f:selectItem itemLabel="Type 1" itemValue="1" />
                                            <f:selectItem itemLabel="Type 2" itemValue="2" />
                                        </h:selectOneMenu>    
                                        <disabled="{fileUploadBean.size &lt; 1}">

                                    </h:form>
                                </h:panelGrid>                            
                            </h:panelGrid>                          
                        </rich:panel>                    
                    </h:form-->                 
                </rich:tab>
                
                <rich:popupPanel id="searchPopup" 
                                 modal="false" 
                                 autosized="true" 
                                 resizeable="false">
                    <f:facet name="header">
                        <h:outputText value="Search results" />
                    </f:facet>
                    <f:facet name="controls">
                        <h:outputLink value="#" 
                                      onclick="#{rich:component('searchPopup')}.hide(); return false;">
                            <h:graphicImage library="img" name="closeIcon.png" width="16px" />
                        </h:outputLink>
                    </f:facet>
                    <h:panelGrid>      
                        <h:form>
                        <rich:dataTable id="resultsTasksTable" 
                                        value="#{processesBean.allProcesses}" 
                                        var="process" 
                                        iterationStatusVar="it"                                     
                                        rows="10"
                                        styleClass="centered">
                            <rich:column>
                                <f:facet name="header">ID</f:facet>
                                <h:outputText value="#{process.idProcess}" />
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">User</f:facet>
                                <h:outputText value="#{process.user.userName}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Name</f:facet>
                                <h:outputText value="#{process.name}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Type</f:facet>
                                <h:outputText value="#{process.type}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Priority</f:facet>
                                <h:outputText value="#{process.priority}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Status</f:facet>                                                        
                                <h:outputText value="#{process.status}" 
                                              style="color: green;" 
                                              rendered="#{process.status.equalsIgnoreCase('finished')}"/>
                                <h:outputText value="#{process.status}" 
                                              style="color: red;" 
                                              rendered="#{process.status.equalsIgnoreCase('running')}"/>
                                <h:outputText value="#{process.status}" 
                                              style="color: blue;" 
                                              rendered="#{process.status.equalsIgnoreCase('waiting')}"/>                                                      
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Start time</f:facet>
                                <h:outputText value="#{process.startTime}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">End time</f:facet>
                                <h:outputText value="#{process.endTime}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Actions</f:facet>
                                <h:selectOneMenu value="#{processesBean.action}">
                                    <f:selectItem noSelectionOption="true"/>
                                    <f:selectItem itemLabel="Cancel" 
                                                  itemValue="cancel"
                                                  itemDisabled="#{processesBean.isFinished(process.idProcess)}"/>
                                    <f:selectItem itemLabel="Force Start" 
                                                  itemValue="force"
                                                  itemDisabled="#{not processesBean.isWaiting(process.idProcess)}"/>
                                </h:selectOneMenu>
                            </rich:column>
                            <f:facet name="footer">
                                <rich:dataScroller page="#{processesBean.page}" />                                
                            </f:facet>                        
                        </rich:dataTable> 
                        </h:form>
                        <hr />
                        <h:panelGrid columns="6">
                            <div id="resultOneDiv" class="resultPie" />
                            <h:outputScript library="jqPlot" name="createDiskOne.js"/>
                            <div id="resultTwoDiv" class="resultPie" />
                            <h:outputScript library="jqPlot" name="createDiskTwo.js"/>
                            <div id="resultThreeDiv" class="resultPie" /> 
                            <h:outputScript library="jqPlot" name="createDiskThree.js"/>
                        </h:panelGrid>
                        <hr />                        
                        <h:panelGrid columns="4" styleClass="centered">
                            <h:outputText value="Format" />
                            <h:form>
                            <h:selectOneMenu value="">
                                <f:selectItem noSelectionOption="true"/>
                                <f:selectItem itemLabel="PDF" 
                                                  itemValue="pdf"/>
                                <f:selectItem itemLabel="CSV" 
                                                  itemValue="csv"/>
                            </h:selectOneMenu>                            
                            <h:commandButton value="Export">
                                <rich:componentControl target="exportPopup" operation="show" />
                            </h:commandButton>
                            <h:commandButton value="Cancel" onclick="#{rich:component('searchPopup')}.hide(); return false;"/>
                            </h:form>
                        </h:panelGrid>
                    </h:panelGrid>
                </rich:popupPanel>

                <rich:popupPanel id="exportPopup" 
                                 modal="true" 
                                 resizeable="true" 
                                 onmaskclick="#{rich:component('exportPopup')}.hide()">
                    <f:facet name="header">
                        <h:outputText value="Export result" />
                    </f:facet>
                    <f:facet name="controls">
                        <h:outputLink value="#" 
                                      onclick="#{rich:component('exportPopup')}.hide(); return false;">
                            <h:graphicImage library="img" name="closeIcon.png" width="16px" />
                        </h:outputLink>
                    </f:facet>
                    <h:form>
                    <h:panelGrid styleClass="centered">
                        <h:outputText value="New PDF/CSV File"/>                        
                    </h:panelGrid>
                    <h:panelGrid styleClass="centered">
                        <h:commandButton value="OK" onclick="#{rich:component('exportPopup')}.hide(); return false;"/>
                    </h:panelGrid>
                    </h:form>
                </rich:popupPanel>

                <rich:tab header="Management"
                          id="Management"
                          onenter="setActiveTab('Management')"
                          onleave="setActiveSub('Main')"
                          contentClass="richTabContent">
                    <f:facet name="header">
                        <h:panelGroup>
                            <h:panelGrid columns="2" columnClasses="middleCol,middleCol">
                                <h:graphicImage library="img" name="management.png" height="18px;"/>
                                <h:outputLabel value="Management"/>
                            </h:panelGrid>
                        </h:panelGroup>
                    </f:facet>
                    <h:form id="subManagement">
                        <h:panelGrid id ="subManagementPanel" columns="4" styleClass="panelLinks" width="100%"                             
                                 columnClasses="subStatusCol2,subStatusCol2,subStatusCol2,subStatusCol2">                    
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Main')}" 
                                             value="Main" 
                                             render="subManagementPanel,managementPanel"
                                             execute=":subManagement"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Main')}"/>
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Launch')}" 
                                             value="Launch" 
                                             render="subManagementPanel,managementPanel"
                                             execute=":subManagement,"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Launch')}"/>
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Monitor')}" 
                                             value="Monitor" 
                                             render="subManagementPanel,managementPanel"
                                             execute=":subManagement"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Monitor')}"/>
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Tests')}" 
                                             value="Tests" 
                                             render="subManagementPanel,managementPanel"
                                             execute=":subManagement"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Tests')}"/>                    
                        </h:panelGrid>
                    </h:form>
                    <br />
                    <h:outputText value="Information not available for non-administrators"
                                  rendered="#{!userBean.isAdmin()}"/>

                    <h:panelGrid id="managementPanel" columns="2" columnClasses="regularCol,topCol">                                                            
                        <h:form id="ldapForm">
                            <rich:panel id="ldapPanel"
                                        rendered="#{userBean.getActiveSub().equalsIgnoreCase('Main')}">
                                        <!-- rendered="{userBean.isAdmin()}" -->
                                <f:facet name="header">
                                    <h:outputText value="LDAP Configuration" />
                                </f:facet>
                                <h:panelGrid columns="2">                        
                                    <h:outputText value="Host: " />
                                    <h:inputText value="#{managerBean.host}" />
                                    <h:outputText value="Port: " />
                                    <h:inputText value="#{managerBean.port}" />
                                    <h:outputText value="cn: " />
                                    <h:inputText value="#{managerBean.cn}" />
                                    <h:outputText value="Password: " />
                                    <h:inputSecret value="#{managerBean.password}" redisplay="true" />
                                    <h:outputText value="Group (OU): " />
                                    <h:inputText value="#{managerBean.group}" />
                                    <h:outputText value="DCs: " />
                                    <h:inputText value="#{managerBean.dcs}" />
                                    <h:outputText value=" "/>
                                    <a4j:commandButton value="Save" 
                                                       action="#{managerBean.saveLdapInfo()}"
                                                       render="ldapPanel"
                                                       execute=":ldapForm"/>
                                </h:panelGrid>
                            </rich:panel>
                        </h:form> 
                        <h:form>
                        <rich:dataTable id="usersTable"
                                        value="#{usersBean.allUsers}" 
                                        var="user" 
                                        iterationStatusVar="it"                                      
                                        rows="15"
                                        rendered="#{userBean.getActiveSub().equalsIgnoreCase('Main')}"
                                        styleClass="rolesTable">
                            <rich:column>
                                <f:facet name="header">#</f:facet>
                                #{it.index}
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Username</f:facet>
                                <h:outputText value="#{user.userName}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Created</f:facet>
                                <h:outputText value="#{user.created}" />
                            </rich:column>
                            <rich:column>
                                <f:facet name="header">Last Connection</f:facet>
                                <h:outputText value="#{user.lastConnection}" />
                            </rich:column> 
                            <rich:column>
                                <f:facet name="header">Comment</f:facet>
                                <h:outputText value="#{user.comment}" />
                            </rich:column> 
                            <rich:column>  
                                <f:facet name="header">Roles</f:facet>
                                <a4j:commandLink styleClass="no-decor" 
                                                 render="editGrid" 
                                                 execute="@this"
                                                 action="#{rolesBean.setCurrentIndex(it.index)}"
                                                 oncomplete="#{rich:component('editPane')}.show()">
                                    <h:graphicImage library="img"
                                                    name="edit.png" 
                                                    alt="edit" />
                                    <a4j:param value="#{it.index}" 
                                               assignTo="#{usersBean.currentUserIndex}" />
                                    <f:setPropertyActionListener target="#{usersBean.editedUser}" 
                                                                 value="#{user}" />
                                </a4j:commandLink>
                            </rich:column>
                            <f:facet name="footer">
                                <rich:dataScroller page="#{usersBean.page}" />
                            </f:facet>
                        </rich:dataTable>  
                        </h:form>
                    </h:panelGrid>

                    <rich:popupPanel id="statPane" autosized="true">
                        <!--h:graphicImage library="img" name="ai.gif" alt="ai" /-->
                        <!--Please wait...-->
                    </rich:popupPanel>                

                    <rich:popupPanel header="Edit User Roles" 
                                     id="editPane" 
                                     domElementAttachment="parent" 
                                     width="600" 
                                     height="219"
                                     left="50"
                                     top="50"
                                     style="background-color: #FFDCDC">
                        <h:form>
                        <h:panelGrid columns="3" id="editGrid">                                                
                            <rich:panel style="width:560px;">
                                <!--f:facet name="header">
                                    <h:outputText value="Roles"/>
                                </f:facet-->
                                <rich:pickList value="#{rolesBean.selectedRoles}" 
                                               sourceCaption="Available roles" 
                                               targetCaption="Current roles" 
                                               listWidth="165px" 
                                               listHeight="100px" 
                                               orderable="true">
                                    <f:selectItems value="#{rolesBean.roles}" 
                                                   var="role" 
                                                   itemValue="#{role}" 
                                                   itemLabel="#{role.roleName}" />
                                    <f:converter converterId="rolesConverter" />
                                </rich:pickList>
                            </rich:panel>                                                
                        </h:panelGrid>
                        <a4j:commandButton value="Store" 
                                           action="#{usersBean.store}" 
                                           render="usersTable" 
                                           execute="editPane"
                                           oncomplete="#{rich:component('editPane')}.hide(); #{rolesBean.removeNewRoles()}; return false;" />
                        <a4j:commandButton value="Cancel" 
                                           onclick="#{rich:component('editPane')}.hide(); return false;" />
                        </h:form>
                    </rich:popupPanel>               
                </rich:tab>

                <rich:tab header="Monitor"
                          id="Monitor"
                          onenter="setActiveTab('Monitor')"
                          onleave="setActiveSub('Main')"
                          contentClass="richTabContent">
                    <f:facet name="header">
                        <h:panelGroup>
                            <h:panelGrid columns="2" columnClasses="middleCol,middleCol">
                                <h:graphicImage library="img" name="monitor.png" height="18px;"/>
                                <h:outputLabel value="Monitor"/>
                            </h:panelGrid>
                        </h:panelGroup>
                    </f:facet>                
                    <h:form id="subMonitor">
                        <h:panelGrid id ="subMonitorPanel" columns="4" styleClass="panelLinks" width="100%"                             
                                 columnClasses="subStatusCol2,subStatusCol2,subStatusCol2,subStatusCol2">                    
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Main')}" 
                                             value="Main" 
                                             render="subMonitorPanel,myMonitorPanel"
                                             execute=":subMonitor"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Main')}"/>
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Launch')}" 
                                             value="Launch" 
                                             render="subMonitorPanel,myMonitorPanel"
                                             execute=":subMonitor"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Launch')}"/>
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Monitor')}" 
                                             value="Monitor" 
                                             render="subMonitorPanel,myMonitorPanel"
                                             execute=":subMonitor"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Monitor')}"/>
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Tests')}" 
                                             value="Tests" 
                                             render="subMonitorPanel,myMonitorPanel"
                                             execute=":subMonitor"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Tests')}"/>                    
                        </h:panelGrid>
                    </h:form>
                    <br />
                        <h:panelGrid id="myMonitorPanel">
                        </h:panelGrid>
                </rich:tab>
             
                <rich:tab header="My account"
                          id="MyAccount"
                          onenter="setActiveTab('MyAccount')"
                          onleave="setActiveSub('Main')"
                          contentClass="richTabContent"> 
                    <f:facet name="header">
                        <h:panelGroup>
                            <h:panelGrid columns="2" columnClasses="middleCol,middleCol">
                                <h:graphicImage library="img" name="account.png" height="18px;"/>
                                <h:outputLabel value="My Account"/>
                            </h:panelGrid>
                        </h:panelGroup>
                    </f:facet>
                    <h:form id="subAccount">
                        <h:panelGrid id ="subAccountPanel" columns="4" styleClass="panelLinks" width="100%"                             
                                 columnClasses="subStatusCol2,subStatusCol2,subStatusCol2,subStatusCol2">                    
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Main')}" 
                                             value="Main" 
                                             render="subAccountPanel,myAccountPanel"
                                             execute=":subAccount"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Main')}"/>
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Launch')}" 
                                             value="Launch" 
                                             render="subAccountPanel,myAccountPanel"
                                             execute=":subAccount"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Launch')}"/>
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Monitor')}" 
                                             value="Monitor" 
                                             render="subAccountPanel,myAccountPanel"
                                             execute=":subAccount"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Monitor')}"/>
                            <a4j:commandLink styleClass="headerLinks" 
                                             action="#{userBean.changeSub('Tests')}" 
                                             value="Tests" 
                                             render="subAccountPanel,myAccountPanel"
                                             execute=":subAccount"
                                             disabled="#{userBean.activeSub.equalsIgnoreCase('Tests')}"/>                    
                        </h:panelGrid>
                    </h:form>
                    <br />
                    <h:panelGrid id="myAccountPanel" styleClass="appTable">
                        <h:form id="myAccountForm">
                            <rich:dataTable value="#{appsBean.allApps}"
                                            var="app"
                                            iterationStatusVar="it" 
                                            id="myAccountTable" 
                                            rows="20"
                                            rendered="#{userBean.getActiveSub().equalsIgnoreCase('Main')}">
                                <rich:column>
                                    <f:facet name="header">Logo</f:facet>
                                    <h:graphicImage name="#{app.logo}" 
                                                    library="img" 
                                                    height="24px"/>
                                </rich:column>
                                <rich:column>
                                    <f:facet name="header">App</f:facet>
                                    <h:outputText value="#{app.name}" />
                                </rich:column>                        
                                <rich:column>
                                    <f:facet name="header">Status</f:facet>
                                    <h:outputText value="#{app.status}" />
                                </rich:column>
                                <rich:column>
                                    <f:facet name="header">Actions</f:facet>
                                    <h:selectOneMenu value="#{appsBean.action}">    
                                        <f:selectItem noSelectionOption="true"/>
                                        <f:selectItem itemLabel="Install" 
                                                      itemValue="install" 
                                                      itemDisabled="#{appsBean.isAvailable(app.name)}" />
                                        <f:selectItem itemLabel="Uninstall"
                                                      itemValue="uninstall"
                                                      itemDisabled="#{appsBean.isInstalled(app.name)}" />
                                    </h:selectOneMenu>
                                </rich:column>                          
                                <f:facet name="footer">
                                    <rich:column colspan="4">
                                        <a4j:commandButton value="Submit" render="myAccountTable" execute=":myAccountFrom" />
                                    </rich:column>
                                </f:facet>                        
                            </rich:dataTable>
                            <h:panelGrid columns="2" rendered="#{userBean.getActiveSub().equalsIgnoreCase('Main')}">
                                <br />
                                <br />                                               
                                <br />
                                <h:form id="pbForm">
                                    <rich:progressBar mode="ajax" 
                                                      value="50" 
                                                      interval="500" 
                                                      id="pb"
                                                      enabled="#{userBean.activeTab.equalsIgnoreCase('MyAccount')}" 
                                                      minValue="0" 
                                                      maxValue="100">
                                        <!--f:facet name="initial">
                                            <h:panelGroup>
                                                <h:outputText value="Process hasn't started yet" />
                                                <a4j:commandButton action="{progressBarBean.startProcess}" value="Start Process" execute="@form"
                                                    render="pb" rendered="{progressBarBean.buttonRendered}" style="margin: 9px 0px 5px;" />
                                            </h:panelGroup>
                                        </f:facet>
                                        <f:facet name="finish">
                                            <h:panelGroup>
                                                <h:outputText value="Process Done" />
                                                <a4j:commandButton action="{progressBarBean.startProcess}" value="Restart Process" execute="@form"
                                                    render="pb" rendered="{progressBarBean.buttonRendered}" style="margin: 9px 0px 5px;" />
                                            </h:panelGroup>
                                        </f:facet-->
                                        <h:outputText value="50 %" />

                                        <!-- Update the progress for each AJAX update -->
                                        <a4j:ajax event="begin" listener="#{progressBarBean.increment}" />
                                    </rich:progressBar>
                                </h:form>
                            </h:panelGrid>
                        </h:form>
                    </h:panelGrid>
                </rich:tab> 
                                                                                                                                                                                                                
            </rich:tabPanel>
                
            </h:form>        
        </div>
        </div>
        <div id="footerDiv" >                    
        <rich:panel id="footerPanel">     
            <h:panelGrid columns="3" columnClasses="footerleft,footercenter,footerright">
                <h:outputText value="v1.0" />
                <h:outputText value="&#169;Copyright" />
                <h:graphicImage library="img" 
                                name="logocediant.png" 
                                height="32px" />
            </h:panelGrid>
        </rich:panel> 
        </div>
    </h:body>
</f:view>
</html>    
    
